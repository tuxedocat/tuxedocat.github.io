<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta content="Dev, Photography, Languages, Cats" name="keywords">
<meta content="tuxedocat" name="author">
<meta property="og:title" content="Disk partition manipulation on OSX 10.11 - miauhaus.log">
<meta property="og:url" content="https://log.tuxedokatze.com/post/2016-10-30-osx-clean-install/">
<meta property="og:description" content="mmm...">
<meta property="og:type" content="website" />

<meta name="generator" content="Hugo 0.29" />
<title>Disk partition manipulation on OSX 10.11 | miauhaus.log</title>


<link rel="stylesheet" href="https://log.tuxedokatze.com//css/style.css">
<link rel="shortcut icon" href="https://log.tuxedokatze.com//favicon.ico">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css">

</head>

<body>
<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="https://log.tuxedokatze.com/"><h1 class="title is-4">miauhaus.log</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
          <a class="level-item" href="https://log.tuxedokatze.com/categories" title="Show categories">
            <span class="icon">
              <i class="fa fa-folder"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://log.tuxedokatze.com/tags" title="Show tags">
            <span class="icon">
              <i class="fa fa-tags"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://log.tuxedokatze.com/about" title="About me">
            <span class="icon">
              <i class="fa fa-heart"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://github.com/tuxedocat/" title="Me on Github">
            <span class="icon">
              <i class="fa fa-github"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://tuxedocat.tumblr.com/" title="My photo-blog on Tumblr">
            <span class="icon">
              <i class="fa fa-tumblr"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://www.flickr.com/photos/tuxedocat/" title="My photos on Flickr">
            <span class="icon">
              <i class="fa fa-flickr"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://log.tuxedokatze.com/index.xml" title="RSS Feed">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>
          </a>
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <h1 class="title">Disk partition manipulation on OSX 10.11</h1>
    <h2 class="subtitle is-5">October 30, 2016 </h2>
    
      <div class="tags">
    
        <a class="button is-link" href="https://log.tuxedokatze.com/tags/osx">osx</a>
    
        <a class="button is-link" href="https://log.tuxedokatze.com/tags/mac">mac</a>
    
        <a class="button is-link" href="https://log.tuxedokatze.com/tags/trouble">trouble</a>
    
</div>

    
    <div class="content">
      <h3 id="toc_0">üê° üí¢</h3>

<p>tl;dr
&gt; For clean installation of OSX, there might be some problems for erasing BootCamp partition and getting it merged with main partition using El Capitan‚Äôs DiskUtility.app. In my case, erasing Recovery partition is needed.</p>

<p>Just a private log of my struggle&hellip;</p>

<p></p>

<h3 id="trace">Trace</h3>

<ul>
<li>Saw how people are disappointed with new Macbook Pro</li>
<li>Start thinking to re-use my old MBP 2011 (clean install)</li>
<li>Found BootCamp partition of 70GB which I won‚Äôt use anymore :soon: Erase partition via DiskUtility.app</li>
<li>Reboot, and enter the recovery mode of El Capitan using Recovery HD partition</li>
<li>Enter DiskUtility, and try merging the system partition with free-space which is formally BootCamp partition via Partition menu</li>
<li>‚ÄúOperation failed ‚Ä¶‚Äù</li>
<li>Leave DiskUtility, enter Terminal, and play with diskutil command.</li>
<li>diskutil mergePartitions or some commands failed.</li>
<li>Found Recovery HD partition, which is right next to system partition, was then merged free-space of BootCamp partition</li>
<li>Delete Recovery HD partition to get continuous free-space</li>
<li>&ldquo;OK, let‚Äôs start from zero.&rdquo;</li>
<li>Create El Capitan‚Äôs install drive from another mac using <code>sudo /Applications/Install\ OS\ X\ El\ Capitan.app/Contents/Resources/createinstallmedia --volume /Volumes/Untitled --applicationpath /Applications/Install\ OS\ X\ El\ Capitan.app</code></li>
<li>Reboot MBP with that disk, erase Macintosh HD again, and this worked normally.</li>
<li>Perform clean install.</li>
</ul>

<h3 id="thoughts">Thoughts</h3>

<ul>
<li>What if I need to merge scattered partitions which cannot be merged easily? :soon: Some features of CoreStorage can be used like LVM, I guess.</li>
</ul>
    </div>
    
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy;tuxedocat / CC BY-NC-SA 4.0 : Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></p>
  </div>
</section>


<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js" integrity="sha256-+bhVTaRmJ/c07eV80nU8gD2cBBF0rYkf1txqXlrbvb0=" crossorigin="anonymous"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/python.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/bash.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/scala.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/r.min.js"></script>

<script>
  hljs.initHighlightingOnLoad();
</script>




<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-46681113-3', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>



</body>
